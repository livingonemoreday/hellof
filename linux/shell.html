<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>概念 | 虚心若愚 求知若渴</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/zuoyexifeng/static/pictures/eagle.png">
    <meta name="description" content=" ">
    
    <link rel="preload" href="/zuoyexifeng/assets/css/0.styles.03c5f2dc.css" as="style"><link rel="preload" href="/zuoyexifeng/assets/js/app.2532f0fd.js" as="script"><link rel="preload" href="/zuoyexifeng/assets/js/2.488c7013.js" as="script"><link rel="preload" href="/zuoyexifeng/assets/js/49.30dbd1c3.js" as="script"><link rel="prefetch" href="/zuoyexifeng/assets/js/10.6483aceb.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/11.1044540a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/12.cb6c99d0.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/13.f59b06a4.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/14.bc2976c0.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/15.0c387074.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/16.b6567dfb.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/17.c8382959.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/18.bdcf906e.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/19.684c4fc1.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/20.8169d0fe.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/21.c6cc5ea6.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/22.670a6446.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/23.ff2927fb.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/24.a527c8a0.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/25.9634dc26.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/26.656a8bd2.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/27.970120cb.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/28.cf8a7ce0.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/29.e14f8f78.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/3.f7339565.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/30.88d243e8.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/31.f5268672.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/32.30f660fa.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/33.22f4f413.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/34.75134ad4.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/35.bf537330.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/36.3a177da9.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/37.91738ca1.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/38.84e04bd1.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/39.9085d1c6.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/4.c459c913.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/40.362b3cbd.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/41.f5564900.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/42.cf3a5fef.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/43.9f9560d2.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/44.be49cd8a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/45.a0ff4fcf.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/46.21b0fd39.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/47.3c59336a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/48.b2006081.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/5.b3c64add.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/50.9615220a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/51.cfe39ebe.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/52.00599f6c.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/53.97ed061b.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/54.141711da.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/55.b3af0483.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/56.e6c7ee57.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/57.5e368e7b.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/58.47333e0b.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/59.cad333f4.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/6.f6d993af.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/60.66e0bb3a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/61.2ea3e20c.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/62.fccacd12.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/63.10e9049a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/64.b45ce728.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/65.9c36355c.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/66.9feb0224.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/67.50fb5a39.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/68.96b9a36c.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/69.62b9b830.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/7.d3df42f1.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/70.8e40a053.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/71.c98d445a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/72.bd7a0413.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/73.e19bee2a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/74.30cfaf9a.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/8.775a6037.js"><link rel="prefetch" href="/zuoyexifeng/assets/js/9.525010c3.js">
    <link rel="stylesheet" href="/zuoyexifeng/assets/css/0.styles.03c5f2dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zuoyexifeng/" class="home-link router-link-active"><!----> <span class="site-name">虚心若愚 求知若渴</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zuoyexifeng/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/zuoyexifeng/java/class.html" class="nav-link">
  JAVA
</a></div><div class="nav-item"><a href="/zuoyexifeng/frontEnd/css/selector.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/zuoyexifeng/db/mysql/executionPlan.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/zuoyexifeng/linux/fileDirMg.html" class="nav-link">
  LINUX
</a></div><div class="nav-item"><a href="/zuoyexifeng/python.html" class="nav-link">
  PYTHON
</a></div><div class="nav-item"><a href="/zuoyexifeng/openFrame/others.html" class="nav-link">
  开源框架
</a></div><div class="nav-item"><a href="/zuoyexifeng/tools/giteeVuePress.html" class="nav-link">
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zuoyexifeng/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/zuoyexifeng/java/class.html" class="nav-link">
  JAVA
</a></div><div class="nav-item"><a href="/zuoyexifeng/frontEnd/css/selector.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/zuoyexifeng/db/mysql/executionPlan.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/zuoyexifeng/linux/fileDirMg.html" class="nav-link">
  LINUX
</a></div><div class="nav-item"><a href="/zuoyexifeng/python.html" class="nav-link">
  PYTHON
</a></div><div class="nav-item"><a href="/zuoyexifeng/openFrame/others.html" class="nav-link">
  开源框架
</a></div><div class="nav-item"><a href="/zuoyexifeng/tools/giteeVuePress.html" class="nav-link">
  工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/zuoyexifeng/linux/diskandfilesystem.html" class="sidebar-link">磁盘，文件系统</a></li><li><a href="/zuoyexifeng/linux/fileDirMg.html" class="sidebar-link">文件目录管理</a></li><li><a href="/zuoyexifeng/linux/vim.html" class="sidebar-link">VIM</a></li><li><a href="/zuoyexifeng/linux/bash.html" class="sidebar-link">BASH</a></li><li><a href="/zuoyexifeng/linux/reg.html" class="sidebar-link">正则与文件格式化</a></li><li><a href="/zuoyexifeng/linux/shell.html" aria-current="page" class="active sidebar-link">SHELL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#解析器" class="sidebar-link">解析器</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#脚本的执行方式差异" class="sidebar-link">脚本的执行方式差异</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#判断式" class="sidebar-link">判断式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#test" class="sidebar-link">test</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#判断符号" class="sidebar-link">判断符号[]</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#脚本中的默认变量" class="sidebar-link">脚本中的默认变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#运算符" class="sidebar-link">运算符</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#流程控制" class="sidebar-link">流程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#if" class="sidebar-link">if</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#case" class="sidebar-link">case</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#for" class="sidebar-link">for</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#while" class="sidebar-link">while</a></li></ul></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#系统函数" class="sidebar-link">系统函数</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#自定义函数" class="sidebar-link">自定义函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#shell脚本的跟踪与调试" class="sidebar-link">shell脚本的跟踪与调试</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#过往" class="sidebar-link">过往</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#字符串匹配" class="sidebar-link">字符串匹配</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#目录递归检索" class="sidebar-link">目录递归检索</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#awk" class="sidebar-link">AWK</a></li><li class="sidebar-sub-header"><a href="/zuoyexifeng/linux/shell.html#逐行" class="sidebar-link">逐行</a></li></ul></li></ul></li><li><a href="/zuoyexifeng/linux/accMng.html" class="sidebar-link">账号管理</a></li><li><a href="/zuoyexifeng/linux/crontab.html" class="sidebar-link">计划任务</a></li><li><a href="/zuoyexifeng/linux/ftp.html" class="sidebar-link">FTP</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概念">概念</h2> <blockquote><p>Shell俗称壳（用来区别于核），是指“为使用者提供操作界面”的软件（命令解析器）。
接收应用程序或用户命令，然后调用操作系统内核。</p></blockquote> <h2 id="解析器">解析器</h2> <ul><li>提供的解析器<br>
[root@localhost ~]# cat /etc/shells<br>
/bin/sh<br>
/bin/bash<br>
/usr/bin/sh<br>
/usr/bin/bash</li> <li>默认解析器<br>
[root@localhost ~]# echo $SHELL<br>
/bin/bash</li></ul> <h2 id="脚本的执行方式差异">脚本的执行方式差异</h2> <ul><li>利用直接执行的方式来执行脚本<br>
不管是路径执行还是利用bash执行，该脚本都会使用一个新的bash环境来执行脚本内的命令，
即脚本是在子进程的bash中执行。当子进程执行完毕，在子进程中的各项变量和操作将会结束而不会传回到父进程中。</li> <li>利用source来执行脚本：在父进程中执行</li></ul> <h2 id="判断式">判断式</h2> <h3 id="test">test</h3> <blockquote><p>test执行结果不会显示任何信息，可通过$?或&amp;&amp;及||来展示</p></blockquote> <table><tr><th style="width:200px;text-align:center;">参数</th> <th style="width:600px;text-align:left;">意义</th></tr> <tr><td colspan="2" style="width:800px;">
                    1.文件类型判断，eg: test -e filename
            </td></tr> <tr><td style="text-align:center;">-e</td> <td>文件是否存在</td></tr> <tr><td style="text-align:center;">-f/d/L/b/c/s/p</td> <td>文件/目录/链接文件/block device/字符device/socket文件/fifo文件</td></tr> <tr><td colspan="2" style="width:800px;">
                2.文件权限检测，eg: test -r filename
        </td></tr> <tr><td style="text-align:center;">-r/w/x/u/g/k</td> <td>可读/写/执行/SUID/SGID/Sticky bit</td></tr> <tr><td style="text-align:center;">-s</td> <td>是否存在且非空</td></tr> <tr><td colspan="2" style="width:800px;">
                    3.两个文件之间的比较，eg: test file1 -nt file2
            </td></tr> <tr><td style="text-align:center;">-nt</td> <td>newer than</td></tr> <tr><td style="text-align:center;">-ot</td> <td>older than</td></tr> <tr><td style="text-align:center;">-ef</td> <td>是否为同一文件，是否指向同一inode</td></tr> <tr><td colspan="2" style="width:800px;">
                        4.关于两个整数之间的判断，eg: test n2 -eq n2
                </td></tr> <tr><td style="text-align:center;">-eq/ne/gt/lt/ge/le</td> <td>equal/not equal/...</td></tr> <tr><td colspan="2" style="width:800px;">
                        5.字符串的判断
                </td></tr> <tr><td style="text-align:center;">test -z string</td> <td>string为空，则为true</td></tr> <tr><td style="text-align:center;">test [-n] string</td> <td>string为空，则为false</td></tr> <tr><td style="text-align:center;">test str1 == str2</td> <td></td></tr> <tr><td style="text-align:center;">test str1 != str2</td> <td></td></tr> <tr><td colspan="2" style="width:800px;">
                        6.多重条件判断，eg: test -r filename -a -x filename
                </td></tr> <tr><td style="text-align:center;">-a/o</td> <td>and/or</td></tr> <tr><td style="text-align:center;">!</td> <td>取反</td></tr></table> <h3 id="判断符号">判断符号[]</h3> <ul><li>[]内的每个组件都需要有空格来分隔</li> <li>[]内的变量最好都以双引号括起来: &quot;${HOME}&quot;</li> <li>[]内的常量最好都以单/双引号括起来</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[yu@103 b]$ [ -r &quot;${HOME}&quot; ] &amp;&amp; echo &quot;可读&quot; || echo &quot;不可读&quot;
可读
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="脚本中的默认变量">脚本中的默认变量</h3> <ul><li>${n}</li></ul> <blockquote><p>n为数字，${0}代表该脚本名，${1-n}为参数</p></blockquote> <ul><li>$#</li></ul> <blockquote><p>获取所有输入参数个数，常用于循环</p></blockquote> <ul><li>$@</li></ul> <blockquote><p>获取命令行中所有的参数</p></blockquote> <ul><li>$?</li></ul> <blockquote><p>最后一次执行的命令的返回状态。若为0，
证明上一个命令正确执行；若为非0，则反之</p></blockquote> <h2 id="运算符">运算符</h2> <ul><li>$((运算式))或$[运算式]</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# echo $[(1+2)*3]
9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>expr  + 、-、*、/、%  需要空格</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# expr `expr 1 + 2` \* 3
9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="流程控制">流程控制</h2> <h3 id="if">if</h3> <div class="language- extra-class"><pre><code>if [ 条件判断式 ];then 
  程序 
fi 
或者 
if [ 条件判断式 ] 
  then 
    程序 
fi
</code></pre></div><h3 id="case">case</h3> <div class="language- extra-class"><pre><code>case $变量名 in 
  &quot;值1&quot;） 
    执行程序1 
    ;; 
  &quot;值2&quot;） 
    执行程序2 
    ;; 
  ...
  *） 
    默认程序 
    ;; 
esac
</code></pre></div><h3 id="for">for</h3> <ul><li><p>语法一：</p> <div class="language- extra-class"><pre><code>  for((初始值;循环控制条件;变量变化)) 
    do 
      程序 
    done
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# vi hello.sh 
#!/bin/bash
count=0
for((i=1;i&lt;=$1;i++))
do
        count=$[$count+i]
done
echo $count
[root@localhost shell]# sh hello.sh 10
55
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>语法二：<span id="001"></span></p> <div class="language- extra-class"><pre><code>  for 变量 in 值1 值2 值3… 
    do 
      程序 
    done
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# vi hello.sh 

#!/bin/bash
for arg in $*
#!/bin/bash
for arg in $*
do
        echo $arg
done
echo &quot;====\$*====&quot;
for arg in &quot;$*&quot;
do
        echo $arg
done
echo &quot;====\&quot;\$*\&quot;====&quot;
for arg in $@
do
        echo $arg
done
echo &quot;====\$@====&quot;
for arg in &quot;$@&quot;
do
        echo $arg
done
echo &quot;====\&quot;\$@\&quot;====&quot;
~ 
[root@localhost shell]# sh hello.sh a b
a
b
====$*====
a b
====&quot;$*&quot;====
a
b
====$@====
a
b
====&quot;$@&quot;====
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></li></ul> <blockquote><p>$(seq 1 100)，{1..100}可取连续的整数</p></blockquote> <h3 id="while">while</h3> <div class="language- extra-class"><pre><code>while [ 条件判断式 ] 
  do 
    程序
  done
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# vi hello.sh 

#!/bin/bash
sum=0
i=1
while [ $i -le $1 ]
do
        sum=$[$sum+$i]
        i=$[$i+1]
done
echo $sum
~ 
[root@localhost shell]# sh hello.sh 10
55
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="函数">函数</h2> <h3 id="系统函数">系统函数</h3> <ul><li>basename [path] [suffix] 只剩去掉suffix后的文件名</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# basename /root/shell/hello.sh .sh
hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>dirname absolutePath	只剩上一级目录路径</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# dirname /root/shell/hello.sh 
/root/shell
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="自定义函数">自定义函数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost shell]# vi hello.sh 

#!/bin/bash
function sum() {
        echo $[$1+$2]
}
read -p &quot;first param &quot; p1
read -p &quot;second param &quot; p2
sum p1 p2
~ 
[root@localhost shell]# sh hello.sh 
first param 1
second param 2
3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="shell脚本的跟踪与调试">shell脚本的跟踪与调试</h2> <ul><li>sh [-nvx] scripts.sh
<ul><li>-n: 不要执行脚本，仅查询语法问题</li> <li>-v: 在执行脚本前，先将脚本文件的内容输出到屏幕</li> <li>-x: 将使用到的脚本内容显示到屏幕上！！！</li></ul></li></ul> <h2 id="过往">过往</h2> <h3 id="字符串匹配">字符串匹配</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[[ &quot;hello.dog&quot; =~ ^.*\.dog$ ]]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数组">数组</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>for index in &quot;${!arr[@]}&quot;
do
    ele=${arr[$index]}
done
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>for ele in &quot;${arr[@]}&quot;
do

done
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>function fn() {
    arr=($1)
    for ele in &quot;${arr[@]}&quot;
    do
        # todo
    done
}
arrs=(&quot;a&quot; &quot;b&quot;)
# 传递一个元素
fn &quot;${arrs[1]}&quot;
# 传递整个数组的所有元素
fn &quot;${arrs[*]}&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="目录递归检索">目录递归检索</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>function retrieve() {
    for file in `ls &quot;$*&quot; | tr &quot; &quot; &quot;\?&quot;`
    do
        file=`echo $file | tr &quot;\?&quot; &quot; &quot;`
        absolute_path=&quot;$1&quot;/&quot;$file&quot;
        if [ -d &quot;$absolute_path&quot; ];then
            retrieve &quot;$absolute_path&quot;
        else
            # todo
        fi
    done
}
retrieve $(pwd)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="awk">AWK</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>| awk -v v1=&quot;${xx}&quot; -v v2=&quot;${oo}&quot; 'BEGIN {
        FS=&quot;[ ]+&quot;
        printf &quot;$s,%s&quot;, $1 $2
    } {
        switch($1) {
            case &quot;a&quot;:
                a = $2
                // 替换
                gsub(/(.*\/)+/, &quot;&quot;, a)
                // 分割
                split($2, arr, &quot;.&quot;)
                cnt = length(arr)
                b = substr(a, 5, 2)
                break;
            default:
                // todo
        }
    } &gt;&gt; &quot;${file}&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="逐行">逐行</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cat hello.jsp | while read line
do
    echo $line
done
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zuoyexifeng/linux/reg.html" class="prev">
        正则与文件格式化
      </a></span> <span class="next"><a href="/zuoyexifeng/linux/accMng.html">
        账号管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/zuoyexifeng/assets/js/app.2532f0fd.js" defer></script><script src="/zuoyexifeng/assets/js/2.488c7013.js" defer></script><script src="/zuoyexifeng/assets/js/49.30dbd1c3.js" defer></script>
  </body>
</html>
