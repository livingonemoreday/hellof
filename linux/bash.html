<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BASH | 虚心若愚 求知若渴</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/hellof/static/pictures/eagle.png">
    <meta name="description" content=" ">
    
    <link rel="preload" href="/hellof/assets/css/0.styles.b122a951.css" as="style"><link rel="preload" href="/hellof/assets/js/app.eec69b23.js" as="script"><link rel="preload" href="/hellof/assets/js/2.c60f8f4a.js" as="script"><link rel="preload" href="/hellof/assets/js/44.da84cdf4.js" as="script"><link rel="prefetch" href="/hellof/assets/js/10.a1481cda.js"><link rel="prefetch" href="/hellof/assets/js/11.09b76f98.js"><link rel="prefetch" href="/hellof/assets/js/12.9ef86b12.js"><link rel="prefetch" href="/hellof/assets/js/13.d3bdee46.js"><link rel="prefetch" href="/hellof/assets/js/14.56817cd5.js"><link rel="prefetch" href="/hellof/assets/js/15.81c2dad4.js"><link rel="prefetch" href="/hellof/assets/js/16.37e76fb1.js"><link rel="prefetch" href="/hellof/assets/js/17.8eae35c3.js"><link rel="prefetch" href="/hellof/assets/js/18.bdcf906e.js"><link rel="prefetch" href="/hellof/assets/js/19.773e2eb1.js"><link rel="prefetch" href="/hellof/assets/js/20.7e67cfb5.js"><link rel="prefetch" href="/hellof/assets/js/21.12b4c26d.js"><link rel="prefetch" href="/hellof/assets/js/22.b5a96ea5.js"><link rel="prefetch" href="/hellof/assets/js/23.460b33d0.js"><link rel="prefetch" href="/hellof/assets/js/24.c068723f.js"><link rel="prefetch" href="/hellof/assets/js/25.dca7bcad.js"><link rel="prefetch" href="/hellof/assets/js/26.1cd9100c.js"><link rel="prefetch" href="/hellof/assets/js/27.24c7a00c.js"><link rel="prefetch" href="/hellof/assets/js/28.54e4a3a1.js"><link rel="prefetch" href="/hellof/assets/js/29.03c5ba53.js"><link rel="prefetch" href="/hellof/assets/js/3.3b82c263.js"><link rel="prefetch" href="/hellof/assets/js/30.1ca93aa1.js"><link rel="prefetch" href="/hellof/assets/js/31.cb09bb4e.js"><link rel="prefetch" href="/hellof/assets/js/32.46d80373.js"><link rel="prefetch" href="/hellof/assets/js/33.3274a1e5.js"><link rel="prefetch" href="/hellof/assets/js/34.be2de1e0.js"><link rel="prefetch" href="/hellof/assets/js/35.319c95b7.js"><link rel="prefetch" href="/hellof/assets/js/36.369d3f4f.js"><link rel="prefetch" href="/hellof/assets/js/37.4cc51429.js"><link rel="prefetch" href="/hellof/assets/js/38.8556de39.js"><link rel="prefetch" href="/hellof/assets/js/39.03fdf0b0.js"><link rel="prefetch" href="/hellof/assets/js/4.109dc044.js"><link rel="prefetch" href="/hellof/assets/js/40.680f208c.js"><link rel="prefetch" href="/hellof/assets/js/41.fdb3b944.js"><link rel="prefetch" href="/hellof/assets/js/42.f8fa06a5.js"><link rel="prefetch" href="/hellof/assets/js/43.6db2e8b5.js"><link rel="prefetch" href="/hellof/assets/js/45.ef1b717c.js"><link rel="prefetch" href="/hellof/assets/js/46.8aecdd72.js"><link rel="prefetch" href="/hellof/assets/js/47.99ad28b4.js"><link rel="prefetch" href="/hellof/assets/js/48.b7b1f966.js"><link rel="prefetch" href="/hellof/assets/js/49.210936eb.js"><link rel="prefetch" href="/hellof/assets/js/5.ef5ba397.js"><link rel="prefetch" href="/hellof/assets/js/50.b045318b.js"><link rel="prefetch" href="/hellof/assets/js/51.67a4baa1.js"><link rel="prefetch" href="/hellof/assets/js/52.2e8cb6ef.js"><link rel="prefetch" href="/hellof/assets/js/53.e8cc057c.js"><link rel="prefetch" href="/hellof/assets/js/54.6b521849.js"><link rel="prefetch" href="/hellof/assets/js/55.f3ec65c0.js"><link rel="prefetch" href="/hellof/assets/js/56.db215c70.js"><link rel="prefetch" href="/hellof/assets/js/57.773b5a63.js"><link rel="prefetch" href="/hellof/assets/js/58.e9c5518e.js"><link rel="prefetch" href="/hellof/assets/js/59.24554a3a.js"><link rel="prefetch" href="/hellof/assets/js/6.9ba6c2dc.js"><link rel="prefetch" href="/hellof/assets/js/60.4710b701.js"><link rel="prefetch" href="/hellof/assets/js/61.4ec5c395.js"><link rel="prefetch" href="/hellof/assets/js/62.88e41689.js"><link rel="prefetch" href="/hellof/assets/js/63.35e3df23.js"><link rel="prefetch" href="/hellof/assets/js/64.db96da27.js"><link rel="prefetch" href="/hellof/assets/js/65.ee730c0f.js"><link rel="prefetch" href="/hellof/assets/js/66.456c9fb5.js"><link rel="prefetch" href="/hellof/assets/js/67.3b18aa86.js"><link rel="prefetch" href="/hellof/assets/js/68.faeed2d4.js"><link rel="prefetch" href="/hellof/assets/js/69.f75b9eb8.js"><link rel="prefetch" href="/hellof/assets/js/7.81d99531.js"><link rel="prefetch" href="/hellof/assets/js/70.bfabcba1.js"><link rel="prefetch" href="/hellof/assets/js/71.f4a6a6a4.js"><link rel="prefetch" href="/hellof/assets/js/72.b0d76d67.js"><link rel="prefetch" href="/hellof/assets/js/73.3e555f49.js"><link rel="prefetch" href="/hellof/assets/js/74.ade6438a.js"><link rel="prefetch" href="/hellof/assets/js/75.7603458d.js"><link rel="prefetch" href="/hellof/assets/js/8.cf9c7f28.js"><link rel="prefetch" href="/hellof/assets/js/9.f79ac362.js">
    <link rel="stylesheet" href="/hellof/assets/css/0.styles.b122a951.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hellof/" class="home-link router-link-active"><!----> <span class="site-name">虚心若愚 求知若渴</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hellof/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/hellof/java/class.html" class="nav-link">
  JAVA
</a></div><div class="nav-item"><a href="/hellof/frontEnd/css/selector.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/hellof/db/mysql/executionPlan.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/hellof/linux/fileDirMg.html" class="nav-link">
  LINUX
</a></div><div class="nav-item"><a href="/hellof/python.html" class="nav-link">
  PYTHON
</a></div><div class="nav-item"><a href="/hellof/openFrame/others.html" class="nav-link">
  开源框架
</a></div><div class="nav-item"><a href="/hellof/tools/giteeVuePress.html" class="nav-link">
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hellof/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/hellof/java/class.html" class="nav-link">
  JAVA
</a></div><div class="nav-item"><a href="/hellof/frontEnd/css/selector.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/hellof/db/mysql/executionPlan.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/hellof/linux/fileDirMg.html" class="nav-link">
  LINUX
</a></div><div class="nav-item"><a href="/hellof/python.html" class="nav-link">
  PYTHON
</a></div><div class="nav-item"><a href="/hellof/openFrame/others.html" class="nav-link">
  开源框架
</a></div><div class="nav-item"><a href="/hellof/tools/giteeVuePress.html" class="nav-link">
  工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hellof/linux/diskandfilesystem.html" class="sidebar-link">磁盘，文件系统</a></li><li><a href="/hellof/linux/fileDirMg.html" class="sidebar-link">文件目录管理</a></li><li><a href="/hellof/linux/vim.html" class="sidebar-link">VIM</a></li><li><a href="/hellof/linux/bash.html" aria-current="page" class="active sidebar-link">BASH</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#bash" class="sidebar-link">BASH</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#变量" class="sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#变量的使用" class="sidebar-link">变量的使用</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#环境变量的功能" class="sidebar-link">环境变量的功能</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#变量的有效范围" class="sidebar-link">变量的有效范围</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#变量键盘读取、数组与声明" class="sidebar-link">变量键盘读取、数组与声明</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#文件系统及程序的限制关系" class="sidebar-link">文件系统及程序的限制关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#命令别名、历史别名" class="sidebar-link">命令别名、历史别名</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#alias" class="sidebar-link">alias</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#history" class="sidebar-link">history</a></li></ul></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#bash-shell的操作环境" class="sidebar-link">Bash shell的操作环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#路径与命令查找顺序" class="sidebar-link">路径与命令查找顺序</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#登录与欢迎信息" class="sidebar-link">登录与欢迎信息</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#环境变量配置文件" class="sidebar-link">环境变量配置文件</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#通配符和特殊字符" class="sidebar-link">通配符和特殊字符</a></li></ul></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#数据流重定向" class="sidebar-link">数据流重定向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#、-、" class="sidebar-link">;、&amp;&amp;、||</a></li></ul></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#管道命令" class="sidebar-link">管道命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#选取命令-cut、grep" class="sidebar-link">选取命令：cut、grep</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#排序命令-sort、wc、uniq" class="sidebar-link">排序命令： sort、wc、uniq</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#双向重定向" class="sidebar-link">双向重定向</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#字符转换" class="sidebar-link">字符转换</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#划分命令-split" class="sidebar-link">划分命令：split</a></li><li class="sidebar-sub-header"><a href="/hellof/linux/bash.html#参数代换-xargs" class="sidebar-link">参数代换：xargs</a></li></ul></li></ul></li><li><a href="/hellof/linux/reg.html" class="sidebar-link">正则与文件格式化</a></li><li><a href="/hellof/linux/shell.html" class="sidebar-link">SHELL</a></li><li><a href="/hellof/linux/accMng.html" class="sidebar-link">账号管理</a></li><li><a href="/hellof/linux/crontab.html" class="sidebar-link">计划任务</a></li><li><a href="/hellof/linux/ftp.html" class="sidebar-link">FTP</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="bash">BASH</h2> <blockquote><p>管理计算机硬件的是操作系统的内核，该内核需被保护，so，we use SHELL to communicate with kernel.bash(Bourne Again Shell)</p></blockquote> <p>命令行中： CTRL+u/k代表删除光标处前/后的命令串，CTRL+a/e代表光标移动到命令串的最前/后面</p> <h2 id="变量">变量</h2> <h3 id="变量的使用">变量的使用</h3> <ul><li>变量名和值用=连接，=两边不可有空格，变量名只能是字母和数字，且不可以数字开头，值中若有空格可使用&quot;或'</li> <li>双引号中的特殊字符如$可保有原有特性，而单引号中的则为一般字符即纯文本，</li> <li>一串命令的执行，需其他命令提供信息，可使用``或$()</li> <li>若变量为扩增内容时，可使用&quot;$变量名&quot;或${变量名},eg: PATH=${PATH}:/home/bin</li> <li>若该变量需要在其他子程序执行时，则需要以export来将变量变成环境变量（父进程中的自定义变量无法在子进程中使用）</li> <li>取消变量：unset 变量名</li></ul> <h3 id="环境变量的功能">环境变量的功能</h3> <ul><li>env: 所有环境变量
<ul><li>HISTSIZE: 历史命令记录条数</li></ul></li> <li>set: 环境变量和自定义变量
<ul><li>PS1: 提示字符
<ul><li>\H: 完整主机名称</li> <li>\h: 主机名在第一个小数点之前的名称</li> <li>\t: 24小时时间格式</li> <li>\T: 12小时时间格式</li> <li>\u: 用户名</li> <li>\w: 完整工作目录</li> <li>\W: 工作目录的最后一个目录名称</li> <li>\#: 执行的第几个命令</li> <li>\$: 提示字符，root用户提示字符为#，否则为$</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ echo $PS1
[\u@\h \W]\$
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>$: 当前shell的进程号PID(Process ID)</li> <li>?: 上次命令执行的返回值
<ul><li>0: 上次命令成功执行</li></ul></li> <li>export: 将自定义变量转成环境变量，而后方能被子进程继续使用。
当登录Linux并获得一个bash之后，该bash则是一个独立的进程，之后
在该bash下所执行的任何命令都是由<span style="color:red;">这个</span>bash衍生出来，这些被执行的命令就是这个bash子进程。</li></ul></li></ul> <h3 id="变量的有效范围">变量的有效范围</h3> <p>环境变量的数据可以被子进程引用是因为内存配置的关系：</p> <ul><li>启动shell时，操作系统会分配一定内存区域给shell，此内存中的变量可让子进程使用</li> <li>在父进程中使用export，可让自定义变量的内容写到上述内存区域中</li> <li>当加载另一个shell时，此时指启动子进程而离开父进程，子shell可将父shell的环境变量所在的内存区域导入自己的环境变量区块中</li> <li>此处所言的环境变量和bash的操作环境意思不一样！！！</li></ul> <h3 id="变量键盘读取、数组与声明">变量键盘读取、数组与声明</h3> <ul><li>read: 读取来自键盘输入的变量
<ul><li>read [-pt] variable
<ul><li>-p: 接提示字符</li> <li>-t: 接等待的秒数</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ read -p 'please input your name: ' -t 5 name
please input your name: hello
[jason@localhost ~]$ echo $name
hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>declare,typeset: 声明变量类型
<ul><li>declare [-aixr] variable
<ul><li>-a: 将变量variable定义为数组array类型</li> <li>-i: 将变量variable定义为整数integer类型</li> <li>-x: 同export一样，将变量variable变成环境变量</li> <li>+x: 将</li> <li>-r: 将变量设置为readonly类型，变量值不可再被更改，亦不能unset</li></ul></li></ul> <blockquote><p>变量类型默认为字符串</p></blockquote></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ declare a=1+1
[jason@localhost ~]$ echo $a
1+1
[jason@localhost ~]$ declare -i a=1+1
[jason@localhost ~]$ echo $a
2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ declare -x c=2
[jason@localhost ~]$ declare -p c # -p 可查看变量类型
declare -x c=&quot;2&quot;
[jason@localhost ~]$ declare +x c
[jason@localhost ~]$ declare -p c
declare -- c=&quot;2&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>array</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ arr[0]=aaa
[jason@localhost ~]$ arr[1]=bbb
[jason@localhost ~]$ echo &quot;${arr[1]}, ${arr[1]}&quot;
bbb, bbb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="文件系统及程序的限制关系">文件系统及程序的限制关系</h3> <blockquote><p>限制用户的某些系统资源，包括开启的文件数量，可以使用的CPU时间，可以使用的内存总量等</p></blockquote> <ul><li>ulimit [-SHacdfltu] [配额]
<ul><li>-H: hard limit,严格设置，绝不可超过这个设置的数值</li> <li>-S: sort limit,警告设置，可以超过这个设置值，但是超过会有警告信息</li> <li>-a: 后面不接任何选项和参数，可列出所有的限制额度</li> <li>-c: 限制内核文件的最大容量。当某些程序发生错误时，可能会将内存中信息写成文件，该文件成为内核文件(core file)。</li> <li>-f: 此shell可以建立的最大文件容量（一般可设置为2GB），单位Kbytes。</li> <li>-d: 程序可使用的最大段内存容量</li> <li>-l: 可用于锁定的内存量</li> <li>-t: 可使用的最大CPPU时间，单位秒。</li> <li>-u: 单一使用者可以使用的最大进程数量。</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ ulimit -a
core file size          (blocks, -c) 0 # 0代表没有限制
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="命令别名、历史别名">命令别名、历史别名</h2> <h3 id="alias">alias</h3> <h3 id="history">history</h3> <ul><li>history [n]</li> <li>history [-c]</li> <li>history [-raw] histfiles
<ul><li>-a: 将目前新增的history命令新增到histfiles中，若没有histfiles，则默认写入~/.bash_history。</li> <li>-r: 将histfiles中的内容读到shell的history记录中。</li></ul></li> <li>!number: 执行history中的第number条命令</li> <li>!command: 由最近的命令向前找以command开头的命令并执行</li> <li>!!: 执行上一条命令</li></ul> <h2 id="bash-shell的操作环境">Bash shell的操作环境</h2> <h3 id="路径与命令查找顺序">路径与命令查找顺序</h3> <ul><li>以绝对/相对路径执行命令</li> <li>由alias找到该命令来执行</li> <li>由bash内置的（builtin）命令来执行</li> <li>通过$PATH的路径顺序查找第一个命令来执行</li></ul> <h3 id="登录与欢迎信息">登录与欢迎信息</h3> <ul><li>登录界面: /etc/issue</li> <li>登陆后的信息设置: /etc/motd</li></ul> <h3 id="环境变量配置文件">环境变量配置文件</h3> <h4 id="login-shell">login shell</h4> <ul><li>/etc/profile: 系统整体设置，每个用户登录取得bash时一定会读取的配置文件，若需为所有用户设置整体环境，就在此。but，需谨慎。
<ul><li>PATH: 会根据UID决定PATH变量要不要含有sbin的系统命令目录</li> <li>MAIL: 根据账号设置好用户的mailbox到/var/spool/mail/账户名</li> <li>USER:</li> <li>HOSTNAME:</li> <li>HISTSIZE: 历史命令记录数，默认1000</li> <li>umask: root用户默认0022，一般用户默认0002</li></ul></li></ul> <p>/etc/profile还会调用外部配置文件：/etc/profile.d/<em>.sh, /etc/locale.conf, /usr/share/bash-completion/completions/</em></p> <ul><li>~/.bash_profile或~/.bash_login或~/.profile用户个人设置，自己添加数据则写入此文件，会读取此三个文件中的一个，依次。</li> <li>对于只有login shell时才会读取的配置文件，修改后可用source fileName命令来将配置内容读取进shell环境中</li></ul> <h4 id="non-login-shell">non-login shell</h4> <ul><li>~/.bashrc</li> <li>/etc/man_db.conf</li> <li>~/.bash_history</li> <li>~/.bash_logout: 注销bash时，系统会读取后才离开，可以将一些备份操作写入该文件</li></ul> <h3 id="通配符和特殊字符">通配符和特殊字符</h3> <table><tr><th style="width:150px;text-align:center;">符号</th> <th style="width:550px;text-align:left;">意义</th></tr> <tr><td style="text-align:center;">*</td> <td>0-无穷个任意字符</td></tr> <tr><td style="text-align:center;">?</td> <td>一定有一个任意字符</td></tr> <tr><td style="text-align:center;">[]</td> <td>[abc]一定有一个或a或b或c字符</td></tr> <tr><td style="text-align:center;">[-]</td> <td>[0-9]0到9之间的所有数字</td></tr> <tr><td style="text-align:center;">[^]</td> <td>[^abc]一定有一个非abc的其他任意字符</td></tr></table> <ul><li>`` $()可使中间的命令先执行</li></ul> <h2 id="数据流重定向">数据流重定向</h2> <blockquote><p>将某个命令执行后应该要出现在屏幕上的数据，给他传输到其他地方（比如文件或设备）</p></blockquote> <ul><li>标准输入standard input(stdin):&lt;与&lt;&lt;</li> <li>标准输出standard output(stdout): 代码为1，&gt;或&gt;&gt;</li> <li>标准错误输出standard error output(stderr)：代码为2，2&gt;或2&gt;&gt;</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># 正确信息保存到a文件，错误信息保存到b文件
[jason@localhost home]$ find ./ -name vitest &gt;./jason/a 2&gt;./jason/b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 丢弃错误信息 /dev/null 垃圾桶
[jason@localhost home]$ find ./ -name vitest &gt;./jason/a 2&gt;/dev/null
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 将全部数据写入同一个文件a中
[jason@localhost home]$ find ./ -name vitest &gt;./jason/a 2&gt;&amp;1
或
[jason@localhost home]$ find ./ -name vitest &amp;&gt;./jason/a
 #以下方法两股数据同时写入可能会交叉写入造成次序错乱
[jason@localhost home]$ find ./ -name vitest &gt;./jason/a 2&gt;./jason/a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ cat &gt; a #cat建立 a文件
hello # 键盘输入的数据会保存到a文件， ctrl+D 退出
[jason@localhost ~]$ cat a
hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ cat &gt; a &lt;&lt; 'xx' #当输入xx时结束
&gt; hello
&gt; xx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="、-、">;、&amp;&amp;、||</h3> <ul><li>不考虑命令相关性的连续命令可以用 ;</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# sync; sync; shutdown -h now
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>$?与&amp;&amp;或||
<ul><li>cmd1 &amp;&amp; cmd2: cmd1成功，则执行cmd2</li> <li>cmd1 || cmd2: cmd1失败，则执行cmd2</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# ls /tmp &amp;&amp; echo '存在' || echo '不存在'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="管道命令">管道命令</h2> <ul><li>管道命令仅处理标准输出，对于标准错误予以忽略</li> <li>必须要能够接受来自前一个命令的数据成为标准输入继续处理才行</li></ul> <h3 id="选取命令-cut、grep">选取命令：cut、grep</h3> <ul><li>cut: 将一段信息的某一段给切出来，处理的信息以行为单位</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># -d 后面接分割字符 -f 后面接要取出的第几段信息
[root@localhost jason]# echo $PATH | cut -d ':' -f 1,2
/usr/local/bin:/usr/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# export
declare -x HISTCONTROL=&quot;ignoredups&quot;
declare -x HISTSIZE=&quot;1000&quot;
...
# -c 以字符的单位取固定字符区间
[root@localhost jason]# export | cut -c 12- 
HISTCONTROL=&quot;ignoredups&quot;
HISTSIZE=&quot;1000&quot;
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>grep: 分析一行数据，若该行中有所需信息，则将改行取出
<ul><li>grep [-acinv] '查找字符' fileName
<ul><li>-c: 计算找到'查找字符'的次数</li> <li>-i: 忽略大小写</li> <li>-n: 输出行号</li> <li>-v: 反向选择</li></ul></li> <li>grep [-An] [-Bn] [--color=auto] '查找字符' filename
<ul><li>-An: after之意，数字n，除列出该行外，后面的n行也列出</li> <li>-Bn: before之意，数字n，除列出该行外，前面的n行也列出</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# last | grep -v 'root'
jason    pts/0        192.168.125.1    Thu Nov  7 20:41   still logged in   
reboot   system boot  3.10.0-957.el7.x Thu Nov  7 20:37 - 23:00  (02:22)
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# grep 'MANPATH' /etc/man_db.conf 
# MANDATORY_MANPATH			manpath_element
# MANPATH_MAP		path_element	manpath_element
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="排序命令-sort、wc、uniq">排序命令： sort、wc、uniq</h3> <ul><li>sort
<ul><li>sort [-fbMnrtuk] [file or stdin]
<ul><li>-f: 或略大小写</li> <li>-n: 使用纯数字进行排序（默认以文字进行排序）</li> <li>-t: 分隔符，默认用【tab】进行分隔</li> <li>-k: 以哪个区间进行排序</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># 以':'进行分隔后的第三段按数字进行排序
[jason@localhost ~]$ cat /etc/passwd | sort -t ':' -k 3 -n
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>uniq: 将重复的数据仅列出一个显示
<ul><li>uniq [-ic]
<ul><li>-i: 忽略大小写的不同</li> <li>-c: 进行计数</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ last | cut -d ' ' -f 1 | sort | uniq -c
     25 jason
     20 root
     ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>wc: 计算输出信息的整体数据(行数/字数/字符数。。。)
<ul><li>wc [-lwm]
<ul><li>-l: 列出行数</li> <li>-w: 列出多少字（英文字母）</li> <li>-m: 多少字符</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># last 中记录的登录次数 空白行用-v 'unknown' 排除
[jason@localhost ~]$ last | grep -v 'reboot' | grep -v 'wtmp' | grep -v 'unknown' | wc -l
47
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="双向重定向">双向重定向</h3> <blockquote><p>同时将数据流分送到文件和屏幕</p></blockquote> <ul><li>tee [-a] file
<ul><li>-a: 已累加的方式，将数据加入file中</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ last | tee a | cut -d ' ' -f 1
jason
reboot
...
[jason@localhost ~]$ ll
总用量 12
-rw-rw-r--. 1 jason jason 5351 11月  8 21:57 a
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="字符转换">字符转换</h3> <ul><li>tr [-ds] ...
<ul><li>-d: 删除</li> <li>-s: 替换</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># 转大写
[jason@localhost ~]$ last | tr '[a-z]' '[A-Z]'
JASON    PTS/0        192.168.125.1    FRI NOV  8 20:48   STILL LOGGED IN 
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 删除空格
[jason@localhost ~]$ last | tr -d ' '
jasonpts/0192.168.125.1FriNov820:48stillloggedin
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>join: 两个文件中，将相同行数据加在一起
<ul><li>join [-ti12] file1 file2
<ul><li>-t: 默认以空格字符分隔， 并且比对第一个栏位数据， 若相同，则将两条数据连在一起，且第一个栏位至于第一个</li> <li>-i: 忽略大小写</li> <li>-1: 数字1，第一个文件用哪个栏位分析</li> <li>-2: 数字2，第二个文件用哪个栏位分析</li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# head a b
==&gt; a &lt;==
a:hello:name
b:fuck:age

==&gt; b &lt;==
a:world:name
b:you
# 以':'分隔， 两个文件比对分隔后的第三个栏位
[root@localhost jason]# join -t ':' -1 3 -2 3 a b | cat
name:a:hello:a:world

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>paste: 直接将两行贴在一起，中间默认以【tab】隔开
<ul><li>paste [-d] file1 file2 ...filen
<ul><li>-d: 后面接分隔符</li> <li><span style="color:red;">若file部分写成-，则表示来自标准输入的数据</span></li></ul></li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost jason]# cat a | paste b - a
a:world:name	a:hello:name	a:hello:name
b:you	b:fuck:age	b:fuck:age
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>expand: 将【tab】按键转成空格键
<ul><li>expand [-t n] file</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ cat a
a	b	c
[jason@localhost ~]$ cat -A a
a^Ib^Ic$
[jason@localhost ~]$ expand -t 1 a
a b c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="划分命令-split">划分命令：split</h3> <blockquote><p>将源文件依据大小或行数进行划分</p></blockquote> <ul><li>split [-bl] file PREFIX
<ul><li>b: 后面接欲划分成的文件的大小，可加单位b\k\m等</li> <li>l: 以行数进行划分</li> <li>PREFIX: 作为划分文件的前缀</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># 以10行划分，文件前缀为l
[jason@localhost ~]$ ls -al / | split -l 10 - l
[jason@localhost ~]$ ls -al l*
-rw-rw-r--. 1 jason jason 499 11月  9 09:59 laa
-rw-rw-r--. 1 jason jason 513 11月  9 09:59 lab
-rw-rw-r--. 1 jason jason 100 11月  9 09:59 lac
[jason@localhost ~]$ wc -l l*
  10 laa
  10 lab
   2 lac
  22 总用量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="参数代换-xargs">参数代换：xargs</h3> <blockquote><p>产生某个命令的参数</p></blockquote> <ul><li>xargs [-0epn] command
<ul><li>0: 若输入的stdin含有特殊字符，如、空格\等，该参数可将其还原为一般参数</li> <li>e: EOF(enf of file)，后面可接一个字符，当分析到这个字符时，则会停止工作</li> <li>p: 每次执行该命令时，都会询问使用者信息</li> <li>n: 接个数，每次command命令执行，需要使用几个参数</li> <li>若xargs后没有任何命令时，默认以echo进行输出</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># id root, id bin, id daemon
[jason@localhost ~]$ cut -d ':' -f 1 /etc/passwd | head -n 3 | xargs -n 1 id
uid=0(root) gid=0(root) 组=0(root)
uid=1(bin) gid=1(bin) 组=1(bin)
uid=2(daemon) gid=2(daemon) 组=2(daemon)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[jason@localhost ~]$ find /usr/sbin/ -perm /7000 | xargs ls -l
-rwxr-sr-x. 1 root root       7208 10月 31 2018 /usr/sbin/netreport
...
# $() 可以用``替换，表示先执行其中的命令
[jason@localhost ~]$ ls -l $(find /usr/sbin/ -perm /7000)
-rwxr-sr-x. 1 root root       7208 10月 31 2018 /usr/sbin/netreport
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hellof/linux/vim.html" class="prev">
        VIM
      </a></span> <span class="next"><a href="/hellof/linux/reg.html">
        正则与文件格式化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hellof/assets/js/app.eec69b23.js" defer></script><script src="/hellof/assets/js/2.c60f8f4a.js" defer></script><script src="/hellof/assets/js/44.da84cdf4.js" defer></script>
  </body>
</html>
