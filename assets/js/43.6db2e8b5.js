(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{474:function(s,a,e){"use strict";e.r(a);var n=e(54),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"用户账号"}},[s._v("用户账号")]),s._v(" "),e("h3",{attrs:{id:"etc-passwd"}},[s._v("/etc/passwd")]),s._v(" "),e("p",[s._v("里面有很多账号是系统正常运行所必需的，即系统账号，eg:bin、daemon、nobody等，不可随意删除。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("账号名称")])]),s._v(" "),e("li",[e("p",[s._v("密码")])]),s._v(" "),e("li",[e("p",[s._v("UID\n"),e("table",[e("tr",[e("th",{staticStyle:{width:"200px","text-align":"center"}},[s._v("ID范围")]),s._v(" "),e("th",{staticStyle:{width:"600px","text-align":"left"}},[s._v("特性")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("0（系统管理员）")]),s._v(" "),e("td",[s._v("将UID改为0，即可系统管理员，but，不建议多个账号的UID为0，易混乱")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("1-999（系统账号）")]),s._v(" "),e("td",[s._v("系统上启动的网络服务或后台服务希望使用较小的权限去运行，不希望root身份去执行，所以需要提供这些运行中程序的拥有者账号。这些账号通常是不可登录的。")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("1-60000（可登录账号）")]),s._v(" "),e("td",[s._v("目前已支持2^32-1的UID号码")])])])])]),s._v(" "),e("li",[e("p",[s._v("GID")])]),s._v(" "),e("li",[e("p",[s._v("用户信息说明栏")])]),s._v(" "),e("li",[e("p",[s._v("家目录\n若想要将账号家目录移到其他位置，可修改改字段")])]),s._v(" "),e("li",[e("p",[s._v("shell\n为用户指定默认的shell")])])]),s._v(" "),e("h3",{attrs:{id:"etc-shadow"}},[s._v("/etc/shadow")]),s._v(" "),e("ul",[e("li",[s._v("账号名称")]),s._v(" "),e("li",[s._v("密码"),e("br"),s._v("\n在该字段前加上!或*会让密码暂时失效")]),s._v(" "),e("li",[s._v("最近修改密码的日期"),e("br"),s._v("\n此字段记录的是在1970/1/1基础上累加的天数")]),s._v(" "),e("li",[s._v("密码不可被修改的天数"),e("br"),s._v("\n若为0表示可随时更改")]),s._v(" "),e("li",[s._v("密码需要重新修改的天数")]),s._v(" "),e("li",[s._v("密码需要修改期限前的警告天数")]),s._v(" "),e("li",[s._v("密码过期后的宽限时间"),e("br"),s._v("\n密码过期特性：密码过期后在宽限期内需要重新设置密码方能登录继续使用。"),e("br"),s._v("\n若超过宽限期，则密码失效，就无法登录。")]),s._v(" "),e("li",[s._v("账号失效日期"),e("br"),s._v("\n1970/1/1之后的天数。账号在此日期后不管密码是否过期都将无法再使用。可用于收费服务，规定一个日期使账号不能使用。")]),s._v(" "),e("li",[s._v("保留")])]),s._v(" "),e("h2",{attrs:{id:"用户组"}},[s._v("用户组")]),s._v(" "),e("h3",{attrs:{id:"etc-group"}},[s._v("/etc/group")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("[yu@104 ~]$ head -n 2 /etc/group\nroot:x:0:\nbin:x:1:\n")])])]),e("ul",[e("li",[s._v("组名")]),s._v(" "),e("li",[s._v("用户组密码")]),s._v(" "),e("li",[s._v("GID")]),s._v(" "),e("li",[s._v("此用户组支持的账号名称")])]),s._v(" "),e("h3",{attrs:{id:"有效-初始用户组"}},[s._v("有效/初始用户组")]),s._v(" "),e("ul",[e("li",[s._v("/etc/passwd中记录的GID即为初始用户组，当用户一登陆系统，就会拥有该用户组的相关权限，所以不需要在/etc/group的第四个字段写入该账号")]),s._v(" "),e("li",[s._v("groups: 可查看当前账号支持的用户组，第一个输出的即为有效用户组，作用是用于创建文件目录")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ groups\nyu jason \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("newgrp: 以另外一个shell来切换有效用户组，so，"),e("code",[s._v("操作完之后需要exit退回到之前的环境")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ newgrp jason\n[yu@104 ~]$ groups\njason yu\n[yu@104 ~]$ mkdir c\n[yu@104 ~]$ ll\ndrwxr-xr-x. 2 yu jason 6 11月 23 11:19 c\n[yu@104 ~]$ exit\nexit\n[yu@104 ~]$ groups\nyu jason\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"etc-gshadow"}},[s._v("/etc/gshadow")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("[root@104 ~]# head -n 2 /etc/gshadow\nroot:::\nbin:::\n")])])]),e("ul",[e("li",[s._v("组名")]),s._v(" "),e("li",[s._v("密码栏")]),s._v(" "),e("li",[s._v("用户组管理员的账号（/etc/gpasswd）")]),s._v(" "),e("li",[s._v("有加入该组的账号（与/etc/group同）")])]),s._v(" "),e("h2",{attrs:{id:"账号管理"}},[s._v("账号管理")]),s._v(" "),e("h3",{attrs:{id:"useradd"}},[s._v("useradd")]),s._v(" "),e("h4",{attrs:{id:"useradd-u-uid-g-初始用户组-g-次要用户组-mm-c-说明栏-d-家目录绝对路径-s-shell-账号名称"}},[s._v("useradd [-u UID] [-g 初始用户组] [-G 次要用户组] [-mM] [-c 说明栏] [-d 家目录绝对路径] [-s shell] 账号名称")]),s._v(" "),e("ul",[e("li",[s._v("-M: 不要建立家目录，系统账号默认")]),s._v(" "),e("li",[s._v("-m: 建立家目录，一般账号默认")]),s._v(" "),e("li",[s._v("-r: 建立一个系统账号，系统默认不会建立家目录")]),s._v(" "),e("li",[s._v("-s: 默认为/bin/bash")]),s._v(" "),e("li",[s._v("-e: 账号失效日期设置，格式为:YYYY-MM-dd")]),s._v(" "),e("li",[s._v("-f: shadow第7栏目，0为立刻失效，-1永远不失效，只是过期强制登录时重新设置")])]),s._v(" "),e("h4",{attrs:{id:"useradd参考文件"}},[s._v("useradd参考文件")]),s._v(" "),e("h5",{attrs:{id:"etc-default-useradd"}},[s._v("/etc/default/useradd")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("[root@104 ~]# useradd -D\nGROUP=100\nHOME=/home\nINACTIVE=-1            #shadow第7栏\nEXPIRE=                #shadow第8栏\nSHELL=/bin/bash\nSKEL=/etc/skel         #家目录内容参考\nCREATE_MAIL_SPOOL=yes  #是否主动建立邮箱\n")])])]),e("ul",[e("li",[s._v("GROUP=100: 新建用户的初始用户组ID为100，but，centOS默认用户组与账号名相同，why?针对用户组有两种机制：\n"),e("ul",[e("li",[s._v("私有用户组机制：系统建立一个与账号一样的用户组给用户作为初始用户组，此机制比较有保密性，家目录权限将设置为700，该机制不会参考GROUP=100，代表发行版有RHEL，CentOS等")]),s._v(" "),e("li",[s._v("公共用户组机制：以GROUP=100设置值作为新建账号的初始用户组，每个账号都属于那个组，so，彼此可共享家目录的数据，代表发行版SUSE等。")])])]),s._v(" "),e("li",[s._v("SKEL=/etc/skel：家目录内的文件数据是由该目录下的数据cp过去的")])]),s._v(" "),e("h5",{attrs:{id:"etc-skel"}},[s._v("/etc/skel/")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("[yu@104 ~]$ ls -al /etc/skel/\n总用量 24\ndrwxr-xr-x.  2 root root   62 4月  11 2018 .\ndrwxr-xr-x. 78 root root 8192 11月 23 11:04 ..\n-rw-r--r--.  1 root root   18 10月 31 2018 .bash_logout\n-rw-r--r--.  1 root root  193 10月 31 2018 .bash_profile\n-rw-r--r--.  1 root root  231 10月 31 2018 .bashrc\n")])])]),e("h5",{attrs:{id:"etc-login-defs"}},[s._v("/etc/login.defs")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v('[yu@104 ~]$  egrep -v "^#|^$" /etc/login.defs \nMAIL_DIR\t/var/spool/mail     #邮箱\nPASS_MAX_DAYS\t99999           #shadow第5栏\nPASS_MIN_DAYS\t0               #shadow第4栏\nPASS_MIN_LEN\t5               #密码最短字符串，已被pam模块替换\nPASS_WARN_AGE\t7               #shadow第6栏\nUID_MIN                  1000   #使用者最小UID\nUID_MAX                 60000\nSYS_UID_MIN               201   #系统账号最小ID\nSYS_UID_MAX               999\nGID_MIN                  1000\nGID_MAX                 60000\nSYS_GID_MIN               201\nSYS_GID_MAX               999\nCREATE_HOME\tyes                 #不加-mM时，是否主动建立家目录\nUMASK           077             #家目录umask\nUSERGROUPS_ENAB yes             #userdel时是否删除初始用户组\nENCRYPT_METHOD SHA512           #密码加密机制\n')])])]),e("ul",[e("li",[s._v("UID/GID指定值： 当设置一个账号时，首先会参考UID_MIN来获取最小值，从/etc/passwd来获取最大值，从二者中获取最大值+1设置为新账号UID")])]),s._v(" "),e("h3",{attrs:{id:"passwd"}},[s._v("passwd")]),s._v(" "),e("ul",[e("li",[s._v("passwd [--stdin] [账号名称] #所有人均可使用")]),s._v(" "),e("li",[s._v("passwd [-l] [-u] [--stdin] [-S] [-n 日数] [-x 日数] [-w 日数] [-i 日期] 账号 #root功能\n"),e("ul",[e("li",[s._v("--stdin: 可以通过来自前一个管道的数据，作为密码输入，对shell脚本有帮助")]),s._v(" "),e("li",[s._v("-l: lock之意，将/etc/shadow第2栏最前面加上!使密码失效")]),s._v(" "),e("li",[s._v("-u: unlock之意")]),s._v(" "),e("li",[s._v("-n/x/w/i: shadow第4/5/6/7栏位")])])])]),s._v(" "),e("h3",{attrs:{id:"change"}},[s._v("change")]),s._v(" "),e("ul",[e("li",[s._v("change [-ldEImMW] 账号名\n"),e("ul",[e("li",[s._v("-l: 列出该账号的详细密码参数")]),s._v(" "),e("li",[s._v("-d/E: 接日期，shadow第3/8位，格式位：YYYY-MM-DD")]),s._v(" "),e("li",[s._v("-I/m/M/W: 接天数，shadow第7/4/5/6位")]),s._v(" "),e("li",[s._v("change -d 0 用户名，可强制用户在第一次登录时必须修改密码后才能使用系统资源")])])])]),s._v(" "),e("h3",{attrs:{id:"usermod"}},[s._v("usermod")]),s._v(" "),e("ul",[e("li",[s._v("usermod [-cdegGlsuLU] username\n"),e("ul",[e("li",[s._v("-c: /etc/passwd第5栏")]),s._v(" "),e("li",[s._v("-d: 家目录")]),s._v(" "),e("li",[s._v("-e: /etc/shadow第8栏")]),s._v(" "),e("li",[s._v("-f: shadow第7栏")]),s._v(" "),e("li",[s._v("-g/G: 初始/次要用户组")]),s._v(" "),e("li",[s._v("-l: 接账号名称，修改用户名称，passwd第1栏")]),s._v(" "),e("li",[s._v("-s: 后面接shell文件")]),s._v(" "),e("li",[s._v("-u: 后面接UID数字")]),s._v(" "),e("li",[s._v("-L: 暂时将使用者密码冻结，使其无法登录，")]),s._v(" "),e("li",[s._v("-U: 解锁")])])])]),s._v(" "),e("h3",{attrs:{id:"userdel"}},[s._v("userdel")]),s._v(" "),e("ul",[e("li",[s._v("userdel [-r] username\n"),e("ul",[e("li",[s._v("-r: 连同家目录一起删掉")])])])]),s._v(" "),e("h3",{attrs:{id:"id"}},[s._v("id")]),s._v(" "),e("ul",[e("li",[s._v("id username")])]),s._v(" "),e("h3",{attrs:{id:"chfn"}},[s._v("chfn")]),s._v(" "),e("ul",[e("li",[s._v("chfn [-foph] username\n"),e("ul",[e("li",[s._v("-f: 接完整大名")]),s._v(" "),e("li",[s._v("-o: 办公室房间号码")]),s._v(" "),e("li",[s._v("-p: 办公室电话号码")]),s._v(" "),e("li",[s._v("-h: 家里电话号码")])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ chfn\nChanging finger information for yu.\n名称 []: yufl\n办公 []: 110\n办公电话 []: 9527\n住宅电话 []: 222\n\n密码：\nFinger information changed.\n[yu@104 ~]$ grep 'yu' /etc/passwd\nyu:x:1001:1001:yufl,110,9527,222:/home/yu:/bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"chsh-change-shell"}},[s._v("chsh（change shell)")]),s._v(" "),e("ul",[e("li",[s._v("chsh [-ls]\n"),e("ul",[e("li",[s._v("-l: 列出系统可用shell，即/etc/shells的内容")]),s._v(" "),e("li",[s._v("-s: 设置修改自己的shell")])])])]),s._v(" "),e("h3",{attrs:{id:"新增删除用户组"}},[s._v("新增删除用户组")]),s._v(" "),e("ul",[e("li",[s._v("groupadd [-g gid] [-r] 用户组名称\n"),e("ul",[e("li",[s._v("-g gid: 设置gid")]),s._v(" "),e("li",[s._v("-r: 建立系统用户组")])])]),s._v(" "),e("li",[s._v("groupmod [-g gid] [-n groupName] 用户组名")]),s._v(" "),e("li",[s._v("groupdel groupName")]),s._v(" "),e("li",[s._v("gpasswd\n"),e("ul",[e("li",[s._v("gpasswd groupname\n"),e("ul",[e("li",[s._v("给groupname组设置密码")])])]),s._v(" "),e("li",[s._v("gpasswd [-A user1,...] [-M userA,...] groupname\n"),e("ul",[e("li",[s._v("-A: 将groupname的管理权交给user1,...")]),s._v(" "),e("li",[s._v("-M: 将userA,...等用户加入groupname组")])])]),s._v(" "),e("li",[s._v("gpasswd [-ad] user groupname\n"),e("ul",[e("li",[s._v("-a: 将user加入groupname组中")]),s._v(" "),e("li",[s._v("-d: 将user从groupname中移除")])])]),s._v(" "),e("li",[s._v("gpasswd [-Rr] groupname\n"),e("ul",[e("li",[s._v("-r: 将groupname的密码删除")]),s._v(" "),e("li",[s._v("-R: 将groupname的密码栏失效")])])])])])]),s._v(" "),e("h2",{attrs:{id:"acl"}},[s._v("ACL")]),s._v(" "),e("blockquote",[e("p",[s._v("Access Control List，提供user/group/others以外的详细权限设置，可以对单一用户，单一文件目录进行权限设置。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@master ~]# dmesg | grep -i acl\n[    1.512137] systemd[1]: systemd 219 running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 -SECCOMP +BLKID +ELFUTILS +KMOD +IDN)\n[    3.777653] SGI XFS with ACLs, security attributes, no debug enabled\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("code",[s._v("对于xfs文件系统已默认支持ACL")])]),s._v(" "),e("h3",{attrs:{id:"setfacl"}},[s._v("setfacl")]),s._v(" "),e("ul",[e("li",[s._v("setfacl [-bkRd] [{-m|-x} acl参数] filename\n"),e("ul",[e("li",[s._v("-m: 设置acl参数权限")]),s._v(" "),e("li",[s._v("-x: 删除acl参数权限")]),s._v(" "),e("li",[s._v("-b: 删除所有的ACL权限")]),s._v(" "),e("li",[s._v("-R: 递归设置acl参数\n"),e("code",[s._v("acl参数 用u:user:权限/g:group:权限/m:权限（针对默认权限mask） 的方式进行设置，设置成功后该目录文件权限部分会多出一个+")])])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@master /]# setfacl -m u:jason:rx /root\n[root@master /]# ll -d root\ndr-xr-x---+ 11 root root 4096 9月  19 17:19 root\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[jason@master ~]$ cd /root\n[jason@master root]$\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@master /]# setfacl -x u:jason /root\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"getfacl"}},[s._v("getfacl")]),s._v(" "),e("ul",[e("li",[s._v("getfacl filename")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@master /]# getfacl root\n# file: root\n# owner: root\n# group: root\nuser::r-x\nuser:jason:r-x  <=对于用户jason设置了rx权限\ngroup::r-x\nmask::r-x       <=有效权限，设置的user/group acl生效权限是 设置的acl权限与该mask权限的交集，即：set的acl权限比如为rx，但是mask权限只有r，那么acl真实权限只有r\nother::---\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h2",{attrs:{id:"用户身份切换"}},[s._v("用户身份切换")]),s._v(" "),e("h3",{attrs:{id:"su"}},[s._v("su")]),s._v(" "),e("ul",[e("li",[s._v("su [-lm] [-c 命令] [username]\n"),e("ul",[e("li",[s._v("-: su -代表使用login-shell的变量文件读取方式来登录系统，没有跟上username代表切换位root身份")]),s._v(" "),e("li",[s._v("-l: 与-类似，也是login-shell方式登录，但需加username")]),s._v(" "),e("li",[s._v("-m: 使用目前的环境设置，而不读取新使用者的配置文件")]),s._v(" "),e("li",[s._v("-c: 仅进行一次命令，所以-c后面可以上命令")]),s._v(" "),e("li",[s._v("仅用su切换身份，读取变量设置方式位非登录shell的方式，很多变量不会被修改，尤其时PATH")])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ su - -c \"grep 'yu' /etc/shadow\"\n密码：\nyu:$6$H...:18222:0:99999:7:::\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"sudo"}},[s._v("sudo")]),s._v(" "),e("blockquote",[e("p",[s._v("su切换到root用户需要输入root的密码，而sudo切换至root用户则只需要输入自己的密码，\n所以并非所有人皆可执行sudo命令，\n而是仅有规范到/etc/sudoers内的用户才能够执行sudo命令。")])]),s._v(" "),e("ul",[e("li",[s._v("sudo [-u 新使用者账号]\n"),e("ul",[e("li",[s._v("-u: 后面接欲切换的使用者，无此项则位切换至root")])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@104 tmp]# sudo -u sshd sh -c "touch a;ls -l"\n总用量 0\n-rw-r--r--. 1 sshd sshd  0 11月 23 18:03 a\n# sh -c "一串命令"\n[root@104 tmp]# grep \'sshd\' /etc/passwd\nsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\n# sshd位系统用户，其shell是nologin，可利用sudo -u 来执行命令\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("visudo")])]),s._v(" "),e("blockquote",[e("p",[s._v("若想要使用sudo执行属于root用户的权限命令，则root需要先使用visudo去修改/etc/sudoers，让该账号能够使用全部或部分的root命令功能。\nwhy need visudo? 因为/etc/sudoers是设置过语法的，如果设置错误就会造成无法使用sudo命令的后果，使用visudo去修改，在结束退出修改界面，操作系统\n会去检验/etc/sudoers语法的正确性。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@104 ~]# egrep -v "^[#D]|^$" /etc/sudoers\n# 使用者账号 登陆者的来源主机名称=(可切换的身份) 可执行的命令（需使用绝对路径）\nroot\tALL=(ALL) \tALL\n# 用户组\n%wheel\tALL=(ALL)\tALL\n[root@104 ~]# visudo\n# 有限制地赋予权限，否则把root用户的密码都给修改了\nyu ALL=(root) !/usr/bin/passwd,!/usr/bin/passwd root,/usr/bin/passwd [A-Za-z]*\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("code",[s._v("通过别名创建visudo")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@104 ~]# visudo\n\nUser_Alias US=zs,ls,ww\nCmnd_Alias CS=!/usr/bin/passwd,!/usr/bin/passwd root,/usr/bin/passwd [A-Za-z]*\nUS ALL=(root) CS\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("通过User_Alias建立一个新账号，账号名称需要大写，指向所有的用户名，Cmnd_Alias定义命令变量，Host_Alias定义来源主机")]),s._v(" "),e("p",[e("code",[s._v("sudo身份确认时间间隔为5分钟")]),e("br"),s._v(" "),e("code",[s._v("sudo搭配su")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@104 ~]# visudo\n\njason ALL=(root) /bin/su -\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[jason@104 ~]$ sudo su -\n[sudo] jason 的密码：\n上一次登录：六 11月 23 21:05:56 CST 2019从 192.168.125.1pts/2 上\n[root@104 ~]# \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"sbin-nologin"}},[s._v("/sbin/nologin")]),s._v(" "),e("ul",[e("li",[s._v("shell是/sbin/nologin的系统账号，无法使用bash或其他shell来登录系统的，但是可以使用其他系统资源。")]),s._v(" "),e("li",[s._v("如果想要在登录系统账户时给予无法登录的原因提示，可修改/etc/nologin.txt该文件")])]),s._v(" "),e("h2",{attrs:{id:"用户信息传递"}},[s._v("用户信息传递")]),s._v(" "),e("h3",{attrs:{id:"查询用户"}},[s._v("查询用户")]),s._v(" "),e("ul",[e("li",[s._v("w")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ w\n 22:35:40 up 6 min,  3 users,  load average: 0.01, 0.11, 0.08\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nroot     tty1                      22:33    2:36   0.02s  0.02s -bash\nyu       pts/0    192.168.125.1    22:30    4.00s  0.08s  0.02s w\nyu       pts/1    192.168.125.1    22:35    5.00s  0.02s  0.02s -bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ul",[e("li",[s._v("who")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ who\nroot     tty1         2019-11-23 22:33\nyu       pts/0        2019-11-23 22:30 (192.168.125.1)\nyu       pts/1        2019-11-23 22:35 (192.168.125.1)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[s._v("lastlog: 可查看每个账号最近登录的时间，lastlog会读取/var/log/lastlog文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[yu@104 ~]$ lastlog | grep -v "从未登录过"\n用户名           端口     来自             最后登陆时间\nroot             tty1                      六 11月 23 22:33:06 +0800 2019\njason            pts/5    192.168.125.1    六 11月 23 22:04:16 +0800 2019\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"用户对话"}},[s._v("用户对话")]),s._v(" "),e("ul",[e("li",[s._v("write user [user所在终端界面]"),e("br"),s._v("\n该操作会立刻中断user原本的任务，那如果user不想接受任何信息，user可使用mesg n来设置")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[yu@104 ~]$ mesg n\n[yu@104 ~]$ mesg\nis n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("but,对于root用户传来的信息是无法阻止的。")]),s._v(" "),e("ul",[e("li",[s._v('wall "..."'),e("br"),s._v("\nwrite是针对某一个用户发送消息，而wall则是广播于所有系统在线用户")])]),s._v(" "),e("h3",{attrs:{id:"用户邮箱"}},[s._v("用户邮箱")]),s._v(" "),e("ul",[e("li",[s._v("安装：yum install -y email")]),s._v(" "),e("li",[s._v('mail -s "邮件标题" username[@localhost]')])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[yu@104 ~]$ mail -s "hello" jason\nhow are you\n.  #用.来结束\nEOT\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v('也可以用mail -s "标题" < filename来传输文件内容')])])}),[],!1,null,null,null);a.default=t.exports}}]);